"use strict";app.controller("ProposeOkMessageCtrl",["$scope","$rootScope","$routeParams","$controller","$location","$log","proposeOkMessageModel","worksModel","messageService",function($scope,$rootScope,$routeParams,$controller,$location,$log,proposeOkMessageModel,worksModel,messageService){$controller("AbstractCtrl",{$scope:$scope}),$log.debug("ProposeOkMessageCtrl Start"),$scope.errors=null,$scope.displayMessages="",$scope.proposeOkMessage=proposeOkMessageModel.proposeOkMessage.get(),$scope.$on("changedProposeOkMessage",function(){$scope.proposeOkMessage=proposeOkMessageModel.proposeOkMessage.get()}),$scope.insertProposeOkMessage=function(proposeOkMessage){$scope.errors=null,$scope.displayMessages="",$scope.showProgressModal(),messageService.insertProposeOkMessage(proposeOkMessage).success(function(data){$scope.hideProgressModal(),$("#modal-propose-ok-message").modal("hide");var works=worksModel.works.get(),flg=!0;void 0!=data&&void 0!=works&&angular.forEach(works,function(work){angular.forEach(work.proposes,function(propose){return propose.id==data.id?(propose.ok_flg=1,worksModel.works.set(works),void(flg=!1)):void 0}),!flg})}).error(function(data){$scope.hideProgressModal();var messages=[];$scope.errors=data,$scope.setErrorMessage(data.content,"\u30e1\u30c3\u30bb\u30fc\u30b8",messages),$scope.setErrorMessage(data.error_message,"",messages),$scope.displayMessages=$scope.getMessage(messages),$("body,html").animate({scrollTop:0},"slow")})}}]);